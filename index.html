<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Catálogo de Impressão 3D</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header class="text-white p-3 d-flex align-items-center justify-content-between glass-effect fixed-top">
      <img src="logo.png" alt="Logo" class="logo" />
      <nav>
        <a href="index.html" class="text-nav me-3">Home</a>
        <a href="#sobre" class="text-nav me-3">Sobre</a>
        <a href="#contato" class="text-nav">Contato</a>
      </nav>
    </header>

    <main class="container">
      <h1 class="text-center text-secondary">Catálogo de Peças 3D</h1>
      <div class="d-flex align-items-center position-relative wrapper">
        <!-- Filtros -->
        <button id="filter-button" class="toggle btn ms-2">
          <input type="checkbox" />
          <span class="button"></span>
          <i class="bi bi-funnel label"></i>
        </button>
        <div id="filter-dropdown" class="dropdown-menu p-3">
          <h6>Filtrar por Tags</h6>
          <div id="filter-tags" class="d-flex flex-wrap">
            <!-- Tags dinâmicas aqui -->
          </div>
        </div>
        <!-- Searchbar -->
        <input id="search-bar" type="text" class="input form-control" placeholder="Buscar por nome ou tag" />

        <select id="sort-options" class="form-select w-auto ms-2">
          <option value="default">Padrão</option>
          <option value="name-asc">Nome (A-Z)</option>
          <option value="name-desc">Nome (Z-A)</option>
        </select>

        <!-- Dropdown -->
        <select id="items-per-page" class="form-select w-auto">
          <option value="10">10</option>
          <option value="20">20</option>
          <option value="30">30</option>
          <option value="infinite">Infinito</option>
        </select>
      </div>
      <div id="gallery" class="row g-3">
        <!-- Cada peça será renderizada como um card -->
      </div>
      <div id="pagination-controls" class="d-flex justify-content-center mt-4">
        <!-- Controles de paginação serão gerados aqui -->
      </div>
    </main>
    <!-- Modal -->
    <div class="modal fade" id="itemModal" tabindex="-1" aria-labelledby="itemModalLabel" aria-hidden="true">
      <span class="res"></span>
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="itemModalLabel">Detalhes do Item</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
          </div>
          <div class="modal-body">
            <h4 id="modalItemName"></h4>
            <p id="modalItemDescription"></p>
            <p><strong>Tags:</strong> <span id="modalItemTags"></span></p>

            <!-- Aqui inseriremos o carrossel de imagens do item -->
            <div id="modalItemImages" class="my-3"></div>
          </div>
        </div>
      </div>
    </div>

    <footer class="text-center bg-dark text-white py-3">&copy; 2024 - Catálogo de Impressão 3D</footer>

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="script.js"></script>
    <script src="filter.js"></script>
    <script>
      function ajustarAlturaDosCards() {
        const cards = document.querySelectorAll(".card");
        let alturaMaxima = 0;

        // Reseta as alturas antes de calcular a altura máxima
        cards.forEach((card) => {
          card.style.height = "auto";
        });

        // Determina a altura máxima
        cards.forEach((card) => {
          const altura = card.offsetHeight;
          if (altura > alturaMaxima) {
            alturaMaxima = altura;
          }
        });

        // Define a altura máxima para todos os cards
        cards.forEach((card) => {
          card.style.height = `${alturaMaxima + 90}px`;
        });
      }

      // Executa o ajuste ao carregar a página
      window.addEventListener("load", ajustarAlturaDosCards);

      // Ajusta a altura ao redimensionar a janela
      window.addEventListener("resize", ajustarAlturaDosCards);
    </script>
  </body>
</html>
